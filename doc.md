Класс Auth

	get
	Получает ключ авторизации с сервиром izkh.

Класс check_email

	get_reports
	Ищет на почте system@izkh.ru выгрузки от поставщиков за текущий день по email и добавляет их в папку report/#{DateTime.now.month}-	#{DateTime.now.year}/#{filename}. Название файла соотвествует названию организации.
	
	get_organizations
	Ищет на почте ivanova@izkh.ru выгрузку от менеджеров за текущий день по теме письма "Organozations" и добавляет их в папку 	organizations. К названию файла приписывается год-месяц-день.

Класс DataProcessing

	amount_to_service(data, vendor_id)
	Обновляет на сервере задолжности уже существующих пользователей из выгрузок поставщиков.

Класс Energosbyt

	update
	Парсер для выгрузки Энегро-Сбыта. 
	Обновляет и создает данные о пользователях в моделе EnAcccount.
	Данные: "user_account", "city", "street", "building", "apartment", "bypass", "meter_reading", "invoice_amount", "data".

Класс Freelancer

	parsing_file
	Парсит выгрузки с фрилансерами
	
	categories
	Запращивает данные о существующих категориях на сервисе izkh.
	
	check_categories
	Добавляет недостающие категории из выгрузки фрилансеров к серсису.
	
	add_freelancers
	Добавляет всех фрилансеров из выгрущки в сервис.

Класс GetRequest

	report_daily
	Запрашивает данные о транзакциях за день с сервиса. Используется для отправки на почту out@izkh.ru реестра транзакций.
	Данные: {payload: amount, date, address, vendor_id, user_account}

	report_hourly
	Запрашивает данные о транзакциях за последние три часа с сервиса. Используется для отправки транзакций менеджерам и поставщикам услуг.
	Данные: {payload: amount, date, address, vendor_id, user_account}


	report_monthly(month)
	Запрашивает данные о транзакциях за текущий месяц с сервиса. Используется для отправки реестра транзакций поставщикам услуг.
	Данные: {payload: amount, date, address, vendor_id, user_account}
		
	transactions(vendor_id, month)
	Запрашивает данные о транзакциях за месяц с сервиса по отпределенному поставщику. Используется в личном кабинете поставщиков для вывода всех транзакций.

	meters(vendor_id, month)
	Запрашивает показания счетчиков за месяц с сервиса по отпределенному поставщику. Используется в личном кабинете поставщиков для вывода показаний.
		
	geocode(address)
	Получает геокод по адресу поставщика из выгрузки менеджеров с geocode-maps.yandex.ru. Используется для получения картинки нахождения поставщика с yandex в справочнике поставщиков.

	nonutilityservicetype
	Запрашивает данные о существующих сервивах в справочнике поставщиков на izkh. Используется при создание новых поставщиков.
	
	servicetypes
	Запрашивает данные о существующих сервивах на izkh. Используется при создание новых поставщиков.
		
	cities
	Запрашивает данные о существующих городах на izkh. Используется при создание новых поставщиков.

	vendor_id(vendor_id)
	Запрашивает сушествующие аккаунты пользователей на сервисе. Используется для обновление задолжностей существующих пользователей из выгрузок поставщиков.

	freelancecategories
	Запрашивает данные о существующих категориях фрилансеров на izkh. Используется при создание новых фрилансеров.

	vendors
	Запрашивает данные о существующих пользователях на izkh. 

	Данные: { vendor: id, title, inn, cities: [{id, title}] }

Класс PostRequest
	
	non_utility_service_type(title)
	Создает новый сервис на izkh для справочника поставщиков из выгрузки менеджеров. Используется при создание новых поставщиков. Отсылается название сервиса.
	:non_utility_service_type => { title: }

	ervicetype(title)
	Создает новый сервис на izkh. Используется при создание новых поставщиков из выгрузки менеджеров. Отсылается название сервиса.
	:service_type => { title: }
	
	non_utility_vendor(title, phone, work_time, address, non_utility_service_type_id, geocode)
	Создает нового поставщика в справочнике поставщиков на izkh. Отсылается название организации, телефон, время работы, адресс, url карта места нахождения поставщика. На static-maps.yandex.ru отсылается доглота и широта, которые формируюся в методе geocode. Ответом будет url на статическую картинку. Данные берутся из выгрузки менеджеров.
	:non_utility_vendor => { title:, phone:, work_time:, address:, non_utility_service_type_id: },
	:picture => { url: "http://static-maps.yandex.ru/1.x/?ll=#{geocode}&z=15&l=map&size=300,200&pt=#{geocode}" }

	non_utility_vendor_with_image(title, phone, work_time, address, non_utility_service_type_id, image)
	Создает нового поставщика в справочнике поставщиков на izkh. Отсылается название организации, телефон, время работы, адресс, url карта места нахождения поставщика. В url записывается место нахождения картинки. Используется при случае, когда static-maps.yandex.ru работает некорректно на заданный в выгрузке адресс. Данные берутся из выгрузки менеджеров.
	:non_utility_vendor => { title:, phone:, work_time:, address:, non_utility_service_type_id: },
	:picture => { url: image }

	vendor(title, service_type_id, commission, cities)
	Создает нового поставщика поставщиков на izkh. Отсылается название организации, сервис id, активность поставщика, комиссия, merchant id, psk и список городов, в которых дейтвует данный поставщик. Некоторые данные берутся из выгрузки менеджеров, другие заданны системой.
	:vendor =>  { title:, service_type_id:, is_active: true, commission: commission, merchant_id: 43222, psk: "e45a8c7b-b0bd-4bdd-93d3-859b463daf81" },
	:cities => cities }

	field_template(tariff_template_id)
	Создает поле доступа к поставщику на izkh. Все поля заданны автоматически. Испоьзуется при создание нового поставщика. 
	:field_template => { title: "Минимальная сумма платежа", value: 0, is_for_calc: false, tariff_template_id: tariff_template_id, field_type: "text_field", field_units: "руб"}

	tariff_template(vendor_id, service_type_id)
	Создает тариф к поставщику на izkh. Передается название тарифа и id сервиса.
	:tariff_template => { title:, vendor_id:, has_readings: false, service_type_id: }

	freelancer(freelance_category_id, description, phone, title, name)
	Создает новых фрисансеров в izkh. Данные берутся из выгрузок менеджеров по фрилансерам. Отсылается категория, к которой относиться фрилансер, описание, телефон, заголовок в приложение, время работы, имя.
	freelancer: { freelance_category_id:, description:, phone:, title:, work_time:, name:}

	payload(data)
	Создание задолжностей на izkh. Данные берутся из базы, сформированной выгрузками.

Класс Organization

	add_vendors
	Обновляет сервисы в izkh и справочнике поставщиков. Добавляет новых поставщиков в базу серсиса izkh, базу личного кабинета поставщиков, в справочник поставщиков. К сервису izkh добавляет тариф(tariff_template), поле доступа(field_template) и города, в которых действует поставщик. Высылает письмо поставщику при наличии email с ключом доступа в личный кабинет.

	check_servicetype(title)
	Обновляет данные о сервисах в izkh по выгрузки менеджеров при создание новых поставщиков.

	check_non_utility_service_types(title)
	Обновляет данные о сервисах справочника поставщиков в izkh по выгрузки менеджеров при создание новых поставщиков.

	parsing_file(file)
	Парсит выгрузку менеджеров. Используется при заведение новых поставщиков.

	get_type(type)
	Создает список сервисов используемых в выгрузки менеджеров. Ипользуется для обновления сервисов в izkh и справочнике поставщиков.

	cities
	Создает список городов существующих в izkh для добавления новых поставщиков с корректными id городов.

Класс Ovd

	xml_parser
	Парсер выгрузки участковых из xml в базу по таблицам Precinct, Street, PrecinctHouse. Добавляет следующие данные:
	в Precinct (ovd:, ovd_town:, ovd_street:, ovd_house:, ovd_telnumber:, surname:, name:, middlename:),
	в Street   (street:),
	в PrecinctHouse (precinct_id:, street_id:, house:)

	xls_parser
	Парсер выгрузки участковых из xls в базу по таблицам Precinct, Street, PrecinctHouse. Добавляет следующие данные:
	в Precinct (ovd:, ovd_town:, ovd_street:, ovd_house:, ovd_telnumber:, surname:, name:, middlename:),
	в Street   (street:),
	в PrecinctHouse (precinct_id:, street_id:, house:)

	xml_to_xsl 
	Выводит папку с выгрузками участковых xml в единым xls файл по следующим столбцам: Управляющий пункт, Адресс, Телефон, Участковый, Участок.

	merge
	Объединяет две выгрузки участковых. Заменяет данные первого файла file_ovd_1 на file_manager при условии, что участковый и его участок неизменен.

Класс Getter
	Абстрактный класс для парсеров.
	
	input
	Выводит данные парсера в консоль.

	create
	Создает новые аккаунты пользователей по определенной ораганизации из выгрузок поставщика. Используется при заведение новых поставщиков.
	update
	Обновляет аккаунты пользователей по определенной ораганизации из выгрузок поставщика и добавляет новых.

Класс Parser

	input
	Абстрактным метод. 

	create
	Создает новые аккаунты пользователей по определенной ораганизации из выгрузок поставщика в таблицу Account. Добавляет следующие данные: user_account, city, street, building, apartment, invoice_amount, vendor_id.

	update
	Обновляет аккаунты пользователей по определенной ораганизации из выгрузок поставщика и добавляет новых в таблицу Account. Добавляет следующие данные: user_account, city, street, building, apartment, invoice_amount, vendor_id.

Класс Dbf
	Парсер для dbf файлов – выгрузки от поставщиков. Данные записывает в таблицу Accounts с следующими полями "user_account", "city", "street", "building", "apartment", "invoice_amount".

	input
	Выводит эти данные в консоль.

	create
	Сохраняет все данные в базу. Используется при заведение новых поставщиков услуг.

	update
	Обновляет данные в базу и добавляет новые.

Класс Txt
	Парсер для txt файлов – выгрузки от поставщиков. Данные записывает в таблицу Accounts с следующими полями "user_account", "city", "street", "building", "apartment", "invoice_amount".

	input
	Выводит эти данные в консоль.

	create
	Сохраняет все данные в базу. Используется при заведение новых поставщиков услуг.

	update
	Обновляет данные в базу и добавляет новые.

Класс Ods
	Парсер для ods файлов – выгрузки от поставщиков. Данные записывает в таблицу Accounts с следующими полями "user_account", "invoice_amount".

	input
	Ищет какой метод парсинга приметить для заданного поставщика услуг. Выводит эти данные в консоль.

	create
	Сохраняет все данные в базу. Используется при заведение новых поставщиков услуг.

	update
	Обновляет данные в базу и добавляет новые.

	first_colomn
	Данные находятся в первой и третей конолке.

	privolga
	Данные находятся в первой и шестой конолке.

Класс Xls
	Парсер для xls файлов – выгрузки от поставщиков. Данные записывает в таблицу Accounts с следующими полями "user_account", "city", "street", "building", "apartment", "invoice_amount".

	input
	Ищет какой метод парсинга приметить для заданного поставщика услуг. Выводит эти данные в консоль.

	create
	Сохраняет все данные в базу. Используется при заведение новых поставщиков услуг.

	update
	Обновляет данные в базу и добавляет новые.

	standard
	# жск_219, ТСЖ "Уют" (Демократическая, 2), жск 199, 298
	# Date from (7:А) to (7:N)
	#
	# == Пример
	#
	# ЖЭУ	№ л/счета	Адрес					 Фамилия И. О.	  Расчетная площадь	 Кол-во проживающих	 Сальдо на 01/10/13	 Начислено	Период оплаты	Дата оплаты	 Оплачено  Пеня	 Списано сальдо  Сальдо на 30/11/13
	# 02	00001  		22-ПАРТСЪЕЗДА, 223-0001  ТУЛУМБАСОВА В.А. 65,00				 4					 3287,35			 6612,75	09/13			18.10.2013	 3400,00		 0,00	   		 3259		

	sokol
	# ТСЖ Сокол
	# Date from (12:2) to (12:10)
	#
	# == Пример
	#
	# Здание													Площ.	Кол-во прож.	Сумма на начало месяца	Итого начис-лено	Итого оплачено	Сумма на конец месяца
	# Лицевой счет	Кв-ра			Квартиросъемщик						
	# 446020, Самарская обл, Сызрань г, Комарова ул, дом № 2  	2693,1	82				88708,79				159048,63			83390,05		164367,37
	# л/с №1		Кв. 1			КНЯЗЕВА АЛЬБИНА СЕРГЕЕВНА	32,3	1				0						2372,46				2372,46	 		0

	silver_creek
	# Серебрянный ручей
	# Date from (8:2) to (8:25)
	#
	# == Пример
	#
	# № п/п	Лицевой счет							Общая площадь	Итого начислено		Сумма на конец месяца
	# 1	Кв. 1, Ирикова Ритта Константиновна, л/с №1	49,80			2434,07				2434,07

	debt_account
	# ТСЖ Набережное
	# Date from (3:2) to (3:5)
	#
	# == Пример
	#
	# начисления за сентябрь		№ лицевого счета	№ квартиры ФИО
	# 3296,70						00000000001			1 Алашеева А.Г.

	first_four
	# Ивушка
	# Date from (2:1) to (2:2)
	#
	# == Пример
	#
	# л/сч	долг
	# 01	2 746,24

	three_columns
	# жск 254
	# Date from (7:1) to (7:2)
	#
	# == Пример
	#
	#  			Конечный остаток
	# л/сч		Задолженность
	# 			208247,25
	# 161-01	3 119,68

	two_columns
	# PTS, жск 268, птс-сервис, Спорт, 29, Бизнес Центр
	# Date from (1:1)
	#
	# == Пример
	#
	# Лицевые счета
	# 391001001

	other
	# Промышленный №261 г.Самара ул.Губанова
	# Date from (2:1) to (2:2)
	#
	# == Пример
	#
	# Наименование		долг
	# Дом 10 кв. 003	355,33

	one_column
	# 138 Only for Samara
	# Date from (1:1)
	#
	# == Пример
	#
	# ул.Мориса Тореза,139
	# 00001

	one_column2
	# ЖСК №265
	# Date from (2:2)
	#
	# == Пример
	#
	# Л/С
	# 1

	first_last
	# ТСЖ №247 Б
	# Date from (3:1) to (3:4)
	#
	# == Пример
	#
	# Лицевые счета ТСЖ № 247 "Б"   за ноябрь 2013 года			
	# № л/счёта	 сальдо на начало месяца	начисленно за текущий месяц	 итого к оплате
	# 30701		 4111,62					3895,37						 8006,99

module Clockwork
	Создает задачи на ежедневную отправку транзакций за день в 1:00, отправку транзакций за последние три часа менеджерам и поставщикам услуг в 1:00, 4:00, 8:00, 11:00, 14:00, 17:00, 20:00, 23:00.

Класс Payment
	Абстрактный класс
	
	output
	Абстрактный метод. Используется для создания и отправки реесторов о транзакциях.

	monthly
	Абстрактный метод. Используется для создания и отправки реесторов о транзакциях за месяц.

Класс Report

	output_report
	Используется для создания и отправки реесторов о транзакциях.

	monthly
	Используется для создания и отправки реесторов о транзакциях за месяц.

	report
    Запускает через sidekiq и clockwork ежедневную отправку транзакций за день на out@izkh.ru в 1:00. Также высылает список не найденных в системе аккаунтов пользователей. (отсутствуют данные аккаунты в выгрузках)

    report_hourly
    Запускает через sidekiq и clockwork отправку транзакций за последние три часа менеджерам и поставщикам услуг в 1:00, 4:00, 8:00, 11:00, 14:00, 17:00, 20:00, 23:00.

Класс AllPayment
	
	output
	Создает txt файл с данными о транзакциях за весь день и отправляется на out@izkh.ru. Файл содержит следующие данные о транзакции: аккаунт пользователя, адресс, сумма, дата, id поставщика.

Класс Booker
	
	output
	Создает txt файл с данными о транзакциях за последние три часа и отправляется на karpenko@izkh.ru, yusova@izkh.ru, Gluhovskaya.o@delta.ru Файл содержит следующие данные о транзакции: название поставщика, аккаунт пользователя, адресс, сумма, дата.

Класс Error
	
	output
	Создает txt файл с транзакциями пользователей, чьих аккаунтов нет в базе (отсутсвуют в выгрузках поставщиков) и оправляет на out@izkh.ru c темой Error.

Класс ReportMonthly

	output
	Создает xls файл с данными о транзакциях за месяц и сохраняет их в report_monthly/#{DateTime.now.month}-#{DateTime.now.year}/ по заданному поставщику. Столбцы: Лицевой счет, Сумма, Дата.

Класс ReportMonthlyTxt

	output
	Создает txt файл с данными о транзакциях за месяц по заданному поставщику. Файл содержит следующие данные о транзакции: аккаунт пользователя, адресс, сумма, дата.

Класс TxtCheckAddress

	output
	Создает txt файл с данными о транзакциях для поставщиков услуг. Файл содержит следующие данные о транзакции: аккаунт пользователя, адресс, сумма, дата, id поставщика. Если данный аккаунт существует в базе вместо адресса введенного пользователям запишутся адресс из выгрузки поставщика. Используется для Цифрал.

Класс TxtPayment

	output
	Создает txt файл с данными о транзакциях для поставщиков услуг. Файл содержит следующие данные о транзакции: аккаунт пользователя, адресс, сумма, дата, id поставщика. 
